@startuml Model Training Use Cases
!pragma layout smetana
skinparam backgroundColor #FEFEFE
skinparam linetype ortho

title Smart X-Ray Screening - Model Training Use Cases

' ============ ACTORS ============
actor "Data Scientist/\nML Engineer" as DataScientist #LightGreen

' ============ SYSTEM BOUNDARY ============
rectangle "Model Training System" {
  
  usecase "Load Training Dataset" as UC1
  usecase "Extract HOG Features" as UC2
  usecase "Encode Metadata" as UC3
  usecase "Prepare Binary Labels\n(Stage 1)" as UC4
  usecase "Prepare Multi-label Labels\n(Stage 2)" as UC5
  usecase "Train Stage 1 SVM" as UC6
  usecase "Train 14 Stage 2 SVMs" as UC7
  usecase "Apply SMOTE Balancing" as UC8
  usecase "Evaluate Models" as UC9
  usecase "Save Trained Models" as UC10
}

' ============ RELATIONSHIPS ============

DataScientist --> UC1

' Training flow
UC1 ..> UC2 : <<include>>
UC1 ..> UC3 : <<include>>
UC1 ..> UC4 : <<include>>
UC1 ..> UC5 : <<include>>

UC4 ..> UC6 : <<include>>
UC5 ..> UC8 : <<include>>

UC8 ..> UC7 : <<include>>

UC6 ..> UC9 : <<include>>
UC7 ..> UC9 : <<include>>

UC9 ..> UC10 : <<include>>

' ============ NOTES ============
note top of UC2
  Batch processing with
  parallel execution
  Output: HOG feature matrix
end note

note right of UC7
  Parallel training using
  ProcessPoolExecutor
  One binary SVM per disease
end note

note right of UC8
  SMOTE balancing applied
  to handle class imbalance
end note

note right of UC9
  **Metrics:**
  - Accuracy
  - Precision & Recall
  - F1-Score
  - Hamming Loss
  - Jaccard Score
end note

note bottom of UC10
  **Saved Files:**
  - svm_stage1_binary.pkl
  - svm_stage2_<Disease>.pkl (×14)
  - feature_scaler.pkl
  - age_scaler.pkl
  - sex_encoder.pkl
  - view_encoder.pkl
end note

legend bottom
  |= Relationship |= Description |
  | ──> | Actor initiates |
  | ..> <<include>> | Required step |
endlegend

@enduml
